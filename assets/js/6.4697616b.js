(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{475:function(t,s,e){t.exports=e.p+"assets/img/0.a8828574.png"},476:function(t,s,e){t.exports=e.p+"assets/img/1.c6e8ac9a.png"},477:function(t,s,e){t.exports=e.p+"assets/img/2.aced40b2.png"},478:function(t,s,e){t.exports=e.p+"assets/img/3.1b92497f.png"},479:function(t,s,e){t.exports=e.p+"assets/img/4.bc12ee93.png"},480:function(t,s,e){t.exports=e.p+"assets/img/5.f5d34fd9.png"},481:function(t,s,e){t.exports=e.p+"assets/img/6.ed64f558.png"},482:function(t,s,e){t.exports=e.p+"assets/img/7.91f24103.png"},483:function(t,s,e){t.exports=e.p+"assets/img/8.44e67ec7.png"},484:function(t,s,e){t.exports=e.p+"assets/img/9.9822ef00.png"},544:function(t,s,e){"use strict";e.r(s);var a=e(31),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_04-github-action-적용하기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_04-github-action-적용하기"}},[t._v("#")]),t._v(" 04. Github Action 적용하기")]),t._v(" "),a("p",[t._v("🍕 이전까지는 "),a("code",[t._v("deploy.sh")]),t._v("을 실행시켜 블로그를 배포했다면, github Action 을 활용하여 소스를 push 할때마다 자동 배포가 되도록 해보겠다.")]),t._v(" "),a("h2",{attrs:{id:"workflow-생성"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workflow-생성"}},[t._v("#")]),t._v(" workflow 생성")]),t._v(" "),a("p",[t._v("📌 "),a("strong",[t._v("먼저, workflow 파일을 생성해주자.")])]),t._v(" "),a("p",[t._v("원하는 디렉토리 로 이동해 "),a("code",[t._v("Actions")]),t._v("로 이동해, "),a("code",[t._v("New workflow")]),t._v(" 클릭해주자!")]),t._v(" "),a("p",[a("img",{attrs:{src:e(475),alt:"vuepress"}})]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("📌 "),a("strong",[t._v("그 다음에 "),a("code",[t._v("Set up this workflow")]),t._v("를 선택해주자.")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(476),alt:"vuepress"}})]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("📌 "),a("strong",[t._v("다음 아래 소스를 입력한다.")])]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[t._v("# This is a basic workflow to help you get started with Actions\n\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" build & deploy # actions 의 workflow 이름\n\n# workflow 가 동작되는 상황\n# master 브랜치에 push 가 발생되는 상황에서 동작한다는 뜻\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" [master]\n\n# A workflow run is made up of one or more jobs that can run sequentially or in parallel\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  # This workflow contains a single job called "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("build-and-deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" # job의 이름"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 여러개의 job이 등록될 수 있음\n    # The type of runner that the job will run on\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu-latest # job 이 돌아가는 환경\n\n    # Steps represent a sequence of tasks that will be executed as part of the job\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      # Checks-out your repository under $GITHUB_WORKSPACE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" so your job can access it\n      - "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout"),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@v2")]),t._v(" # GITHUB_WORKSPACE 로 체크아웃\n\n      # node package 설치\n      - "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" install "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" build\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" |\n          npm install\n          npm run "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("docs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("build\n      # gh-pages 로 배포 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vuepress 배포 스크립트에서 차용"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      - "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" deploy build files\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("ACCESS_TOKEN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.ACCESS_TOKEN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" # 해당 repository 의 Secrets 의 토큰정보를 환경변수에 저장한 후\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" |\n          cd docs/.vuepress/dist\n          git config --global user.email "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hueleev@gmail.com"')]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("git config --global user.name \"leehyunwon\"\n          git init\n          git add -A\n          git commit -m 'deploy with vuepress'\n          # 토큰정보를 바탕으로 gh-pages 브랜치에 push\n          git push -f https://$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ACCESS_TOKEN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@github")]),t._v(".com/$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("GITHUB_REPOSITORY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(".git "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("master")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("gh-pages\n")])])]),a("p",[a("img",{attrs:{src:e(477),alt:"vuepress"}})]),t._v(" "),a("p",[t._v("이때, 내 프로젝트는 script에 build 명령어가 "),a("code",[t._v("docs:build")]),t._v(" 여서 저렇게 입력한거고, 각자 정해놓은 script를 적어주면 된다.")]),t._v(" "),a("h2",{attrs:{id:"access-token-생성"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#access-token-생성"}},[t._v("#")]),t._v(" ACCESS_TOKEN 생성")]),t._v(" "),a("p",[t._v("📌 "),a("strong",[t._v("다음, 프로필 "),a("code",[t._v("settings")]),t._v(" > "),a("code",[t._v("Developer Settings")]),t._v(" 로 이동해주자.")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(478),alt:"vuepress"}})]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("📌 "),a("strong",[t._v("다음 "),a("code",[t._v("Personal access tokens")]),t._v(" > "),a("code",[t._v("Generate new token")]),t._v(" 으로 이동해주자.")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(479),alt:"vuepress"}})]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("📌 "),a("strong",[t._v("토큰이 보이지 않을 경우, "),a("code",[t._v("Regenerate token")]),t._v(" 을 생성 후 복사해준다.")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(480),alt:"vuepress"}})]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("📌 "),a("strong",[t._v("다음, 다시 respository "),a("code",[t._v("settings")]),t._v(" 로 이동 후, "),a("code",[t._v("secrets")]),t._v(" 로 이동해준다.")])]),t._v(" "),a("p",[a("strong",[a("code",[t._v("New repository token")]),t._v(" 을 클릭하고,")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(481),alt:"vuepress"}})]),t._v(" "),a("p",[a("strong",[a("code",[t._v("Name")]),t._v(" 은 "),a("code",[t._v("ACCESS_TOKEN")]),t._v(" , "),a("code",[t._v("value")]),t._v(" 는 이전에 복사한 토큰을 입력한 후, "),a("code",[t._v("Add secret")]),t._v("을 클릭해준다.")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(482),alt:"vuepress"}})]),t._v(" "),a("h2",{attrs:{id:"build-and-deploy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-and-deploy"}},[t._v("#")]),t._v(" build and deploy")]),t._v(" "),a("p",[t._v("📌 "),a("strong",[t._v("vsc 터미널에서 "),a("code",[t._v("git pull")]),t._v(" 명령어를 입력하여, yaml 파일을 받아온다.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull\n")])])]),a("br"),t._v(" "),a("p",[t._v("📌 "),a("strong",[t._v("이제부터 "),a("code",[t._v("master")]),t._v(" 에 "),a("code",[t._v("push")]),t._v("할때마다 블로그가 바로 배포되는 것을 확인할 수 있다.")])]),t._v(" "),a("p",[t._v("그러면 이전에 작업한 "),a("code",[t._v("deploy.sh")]),t._v("을 굳이 실행할 필요없이 master에서 push 만 하면 프로젝트가 저절로 deploy된다."),a("br"),t._v("\n해당 repository 에 Actions 에서 상태를 확인할 수 있다.")]),t._v(" "),a("p",[a("img",{attrs:{src:e(483),alt:"vuepress"}})]),t._v(" "),a("p",[a("img",{attrs:{src:e(484),alt:"vuepress"}})]),t._v(" "),a("h3",{attrs:{id:"reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[t._v("#")]),t._v(" Reference")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("a",{attrs:{href:"https://shockzinfinity.github.io/dev-log/vuepress.html#github-actions-%E1%84%85%E1%85%B3%E1%86%AF-%E1%84%8B%E1%85%B5%E1%84%8B%E1%85%AD%E1%86%BC%E1%84%92%E1%85%A1%E1%86%AB-%E1%84%8C%E1%85%A1%E1%84%83%E1%85%A9%E1%86%BC-%E1%84%87%E1%85%A2%E1%84%91%E1%85%A9",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://shockzinfinity.github.io/dev-log/vuepress.html#github-actions-를-이용한-자동-배포"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);